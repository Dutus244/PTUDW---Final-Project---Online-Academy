{{#section 'css'}}
<link rel="stylesheet" href="../../public/CSS/course.css">
{{/section}}

<div class="container">
  <div class="course-discription">
    <div class="course-detail">
      <h2 class="course-title">{{this.course.coursename}}</h2>
      <p class="discription">{{this.course.tinydes}}</p>
      <p class="student">Học viên: {{this.course.students}}</p>
      <div class="tuition">
        {{#if this.course.discount}}
        <p>Học phí: <del class="text-secondary">₫{{format_number this.course.tuition}}</del> <span
            class="text-danger font-weight-bold" style="display: inline">₫{{format_number this.course.discount}}</span>
        </p>
        {{else}}
        <p>Học phí: <span class="text-danger font-weight-bold" style="display: inline">{{format_number
            this.course.tuition}}</span></p>
        {{/if}}
      </div>
      <p class="last-updated">Cập nhật lần cuối: {{this.course.updatetime}}</p>
      <div class="rating">
        <p class="rating-item">{{this.course.rating}}</p>
        <i class="bi bi-star-fill"></i>
        <p class="text-secondary rating-item">({{this.course.reviews}})</p>
      </div>
      <form id="formAddToWatchlist" action="/course/detail/{{this.course.courseid}}/addToWatchlist" method="post">
      </form>
      <form id="formBuyCourse" action="/course/detail/{{this.course.courseid}}/buy" method="post"></form>
      {{#if this.isBought}}
      <a class="btn button" href="/course/{{this.course.courseid}}/learn" role="button">Go to course</a>
      {{else}}
      {{#if this.isInWatchlist}}
      <a class="btn button disabled" href="#/" role="button">Already in watchlist</a>
      {{else}}
      <a class="btn button" href="javascript: $('#formAddToWatchlist').submit();" role="button">Add to watchlist</a>
      {{/if}}
      <a class="btn button" href="javascript: $('#formBuyCourse').submit();" role="button">Buy now</a>
      {{/if}}


    </div>
    <div class="course-img">
      <img src="/public/img/category/yae.png" width="200px">
    </div>
  </div>

  <div class="course-content">
    <h4 class="header">Nội dung khóa học</h4>
    <p class="content">{{this.course.fulldes}}</p>
  </div>

  <div class="course-menu">
    <h4 class="header">Mục lục</h4>
    <div class="chapter">
      <p class="chapter-header">{{this.course.chaptername}}</p>
      <div class="chapter-menu">
        {{#each this.chapter}}
        <p>{{this.chapter.contentname}}</p>
        <p>{{this.chapter.updatetime}}</p>
        {{/each}}
      </div>
    </div>
  </div>

  <div class="lecturer">
    <h4 class="header">Thông tin giảng viên</h4>
    <div class="information">
      <h5>Họ và tên: {{this.course.lecname}}</h5>
      <p>Kinh nghiệm: {{this.course.experience}}</p>
      <p>About me: {{this.course.aboutme}}</p>
    </div>
  </div>

  <div class="similar-courses">
    <h4 class="header">Các khóa học tương tự</h4>
    <div class="card-body">
      <div class="row pb-2">
        {{#each this.courses}}
        <div class="col-sm-2 mb-2">
          <a href="/course/detail/{{this.courses.courseid}}">
            <div class="card h-100">
              <img class="card-img-top" src="/public/img/category/yae.png" alt="courseTitle">
              <div class="card-body">
                <h4 class="card-title mb-0" id="coursename">{{this.courses.coursename}}</h4>
                <p class="card-text text-secondary mb-0">{{this.courses.lecname}}</p>
                <div class="rating">
                  <p class="rating-item">{{this.courses.rating}}</p>
                  <i class="bi bi-star-fill"></i>
                  <p class="text-secondary rating-item">({{this.courses.reviews}})</p>
                </div>
                {{#if this.discount}}
                <h5 class="card-text mb-0" style="display: inline;">₫{{format_number this.courses.discount}}</h5>
                <del class="text-secondary">₫{{format_number this.courses.tuition}}</del>
                {{else}}
                <h5 class="card-text mb-0">₫{{format_number this.courses.tuition}}</h5>
                {{/if}}
              </div>
            </div>
          </a>
        </div>
        {{/each}}
      </div>
    </div>
</div>

  <div class="feedback">
    <h4 class="header">Đánh giá về khóa học</h4>
    <div class="information">
      {{#each this.feedback}}
      <div class="rating">
        <h6 class="text-secondary rating-item">{{this.feedback.studentname}}</h6>
        <p class="rating-item">{{this.feedback.rating}}</p>
        <i class="bi bi-star-fill"></i>
      </div>
      <p>{{this.feedback.feedback}}</p>
      <p>{{this.feedback.updatetime}}</p>
      {{/each}}
    </div>
  </div>
</div>